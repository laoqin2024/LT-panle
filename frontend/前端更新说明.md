# å‰ç«¯SSHç»ˆç«¯æ›´æ–°è¯´æ˜

## âœ… å·²å®Œæˆçš„æ›´æ–°

### 1. WebSocketç«¯ç‚¹æ›´æ–°

**æ–‡ä»¶**: `frontend/src/components/SshTerminal.tsx`

**ä¿®æ”¹å†…å®¹**:
- å°†WebSocket URLä» `/api/servers/{serverId}/ssh/terminal` 
- æ›´æ–°ä¸º `/api/servers/{serverId}/ssh/terminal/asyncssh`

**ä»£ç å˜æ›´**:
```typescript
// ä¹‹å‰
const wsUrl = `${wsProtocol}//${wsHost}/api/servers/${serverId}/ssh/terminal?credential_id=${credentialId}&token=${encodeURIComponent(token)}`

// ç°åœ¨
const wsUrl = `${wsProtocol}//${wsHost}/api/servers/${serverId}/ssh/terminal/asyncssh?credential_id=${credentialId}&token=${encodeURIComponent(token)}`
```

## âœ… æ¶ˆæ¯æ ¼å¼å…¼å®¹æ€§

æ¶ˆæ¯æ ¼å¼å®Œå…¨å…¼å®¹ï¼Œæ— éœ€ä¿®æ”¹ï¼š

### å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨
```typescript
// å‘é€è¾“å…¥
{type: 'input', data: 'å‘½ä»¤æˆ–è¾“å…¥'}

// è°ƒæ•´ç»ˆç«¯å¤§å°
{type: 'resize', rows: 24, cols: 80}
```

### æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯
```typescript
// è¿æ¥æˆåŠŸ
{type: 'connected', message: 'SSHç»ˆç«¯å·²è¿æ¥'}

// SSHè¾“å‡º
{type: 'output', data: 'è¾“å‡ºå†…å®¹'}

// é”™è¯¯
{type: 'error', message: 'é”™è¯¯ä¿¡æ¯'}
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
source venv-panle/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd frontend
npm run dev
```

### 3. æµ‹è¯•SSHç»ˆç«¯

1. ç™»å½•ç³»ç»Ÿ
2. è¿›å…¥æœåŠ¡å™¨è¯¦æƒ…é¡µé¢
3. åˆ‡æ¢åˆ°"SSHç»ˆç«¯"æ ‡ç­¾
4. é€‰æ‹©SSHå‡­æ®
5. ç‚¹å‡»"è¿æ¥SSHç»ˆç«¯"æŒ‰é’®
6. è§‚å¯Ÿè¿æ¥çŠ¶æ€å’Œç»ˆç«¯è¾“å‡º

## ğŸ” éªŒè¯è¦ç‚¹

- âœ… WebSocketè¿æ¥æˆåŠŸï¼ˆæ˜¾ç¤º"å·²è¿æ¥"çŠ¶æ€ï¼‰
- âœ… SSHç»ˆç«¯è¿æ¥æˆåŠŸï¼ˆæ”¶åˆ°"SSHç»ˆç«¯å·²è¿æ¥"æ¶ˆæ¯ï¼‰
- âœ… å‘½ä»¤æ‰§è¡Œæ­£å¸¸ï¼ˆå¯ä»¥è¾“å…¥å‘½ä»¤å¹¶çœ‹åˆ°è¾“å‡ºï¼‰
- âœ… ç»ˆç«¯äº¤äº’æ­£å¸¸ï¼ˆæ”¯æŒäº¤äº’å¼å‘½ä»¤ï¼‰

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹**: æ—§çš„paramikoç«¯ç‚¹ä»ç„¶å¯ç”¨ï¼Œä½†å»ºè®®ä½¿ç”¨æ–°çš„asyncsshç«¯ç‚¹
2. **æ€§èƒ½æå‡**: æ–°ç«¯ç‚¹ä½¿ç”¨åŸç”Ÿå¼‚æ­¥ï¼Œæ€§èƒ½æ›´å¥½
3. **é”™è¯¯å¤„ç†**: é”™è¯¯æ¶ˆæ¯æ ¼å¼ä¿æŒä¸€è‡´ï¼Œå‰ç«¯æ— éœ€ä¿®æ”¹

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: è¿æ¥å¤±è´¥

**æ£€æŸ¥**:
- åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
- WebSocket URLæ˜¯å¦æ­£ç¡®ï¼ˆåº”è¯¥åŒ…å« `/asyncssh`ï¼‰
- Tokenæ˜¯å¦æœ‰æ•ˆ
- æœåŠ¡å™¨IDå’Œå‡­æ®IDæ˜¯å¦æ­£ç¡®

### é—®é¢˜2: è¿æ¥æˆåŠŸä½†æ²¡æœ‰è¾“å‡º

**æ£€æŸ¥**:
- åç«¯æ—¥å¿—ä¸­çš„SSHè¿æ¥çŠ¶æ€
- æ˜¯å¦å‘é€äº†å‘½ä»¤ï¼ˆéœ€è¦æŒ‰Enterï¼‰
- SSHå‡­æ®æ˜¯å¦æ­£ç¡®

### é—®é¢˜3: ç»ˆç«¯æ˜¾ç¤ºå¼‚å¸¸

**æ£€æŸ¥**:
- æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- åç«¯æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
- WebSocketæ¶ˆæ¯æ ¼å¼æ˜¯å¦æ­£ç¡®

## ğŸ‰ æ›´æ–°å®Œæˆ

å‰ç«¯å·²æˆåŠŸæ›´æ–°ä¸ºä½¿ç”¨æ–°çš„asyncssh SSHç»ˆç«¯å®ç°ï¼

ç°åœ¨å¯ä»¥åœ¨å‰ç«¯ç•Œé¢ä¸­æµ‹è¯•SSHç»ˆç«¯åŠŸèƒ½äº†ã€‚
