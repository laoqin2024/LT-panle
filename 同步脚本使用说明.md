# 代码同步脚本使用说明

## 🚀 快速开始

### 1. 首次使用

```bash
# 进入项目根目录
cd "/Volumes/MyDisk/App programs/laoqin-panle"

# 给脚本添加执行权限（只需要执行一次）
chmod +x sync_repos.sh

# 运行脚本
./sync_repos.sh
```

### 2. 日常使用

```bash
# 方式1: 运行脚本，然后按提示输入提交信息
./sync_repos.sh

# 方式2: 直接提供提交信息
./sync_repos.sh "修复了登录功能的bug"
./sync_repos.sh "添加了用户管理模块"
```

## 📋 脚本功能

- ✅ 自动检测 Git 仓库状态
- ✅ 自动初始化 Git 仓库（如果未初始化）
- ✅ 自动创建 .gitignore 文件（如果不存在）
- ✅ 自动配置远程仓库（GitHub 和 Gitee）
- ✅ 自动添加所有更改的文件
- ✅ 自动提交更改
- ✅ 自动推送到 GitHub 和 Gitee

## 🔧 配置远程仓库

### 首次配置

脚本会在首次运行时提示你输入远程仓库地址：

```
请输入 GitHub 仓库地址（留空跳过）: https://github.com/你的用户名/你的仓库名.git
请输入 Gitee 仓库地址（留空跳过）: https://gitee.com/你的用户名/你的仓库名.git
```

### 手动配置

如果脚本配置失败，可以手动配置：

```bash
# 添加 GitHub 远程仓库
git remote add github https://github.com/你的用户名/你的仓库名.git

# 添加 Gitee 远程仓库
git remote add gitee https://gitee.com/你的用户名/你的仓库名.git

# 查看已配置的远程仓库
git remote -v
```

## 📝 使用示例

### 示例 1: 基本使用

```bash
# 运行脚本
./sync_repos.sh

# 脚本会提示输入提交信息
# 输入: "修复了登录bug"
# 脚本会自动完成所有操作
```

### 示例 2: 直接提供提交信息

```bash
./sync_repos.sh "完成了用户管理模块的开发"
```

### 示例 3: 只推送（没有新更改）

```bash
# 如果没有新更改，脚本会询问是否仍然推送
./sync_repos.sh
# 输入 y 继续推送
```

## ⚠️ 注意事项

1. **首次使用前**，确保已经：
   - 配置了 Git 用户信息（用户名和邮箱）
   - 创建了 GitHub 和 Gitee 仓库
   - 配置了 SSH 密钥或 Personal Access Token

2. **敏感信息**：
   - 不要提交密码、密钥等敏感信息
   - 检查 `.gitignore` 文件，确保敏感文件被忽略

3. **大文件**：
   - Git 不适合存储大文件
   - 如果必须存储，考虑使用 Git LFS

## 🔍 故障排除

### 问题 1: 权限被拒绝

```bash
# 错误: Permission denied
# 解决: 添加执行权限
chmod +x sync_repos.sh
```

### 问题 2: 推送失败（认证问题）

```bash
# 错误: Authentication failed
# 解决: 配置 SSH 密钥或使用 Personal Access Token
# 参考: 手动同步文档.md 中的"常见问题解决"部分
```

### 问题 3: 分支不存在

```bash
# 错误: src refspec main does not exist
# 解决: 创建并切换到 main 分支
git checkout -b main
```

## 📚 更多信息

详细的手动操作说明，请参考：**手动同步文档.md**

## 💡 提示

- 脚本支持 macOS 和 Linux 系统
- 脚本会自动检测当前分支（main 或 master）
- 如果某个远程仓库未配置，脚本会跳过该仓库
- 脚本会显示彩色输出，方便查看执行状态
