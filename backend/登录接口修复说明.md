# ç™»å½•æ¥å£ä¿®å¤è¯´æ˜

## âœ… é—®é¢˜åŸå› 

ä¹‹å‰ä¸ºäº†æ”¯æŒWebSocketæµ‹è¯•ï¼Œå°†ç™»å½•æ¥å£æ”¹ä¸ºäº†è¡¨å•æ•°æ®æ ¼å¼ï¼ˆ`Form(...)`ï¼‰ï¼Œä½†å‰ç«¯ç™»å½•é¡µé¢ä½¿ç”¨çš„æ˜¯JSONæ ¼å¼ï¼Œå¯¼è‡´ç™»å½•å¤±è´¥ã€‚

## âœ… ä¿®å¤æ–¹æ¡ˆ

å°†ç™»å½•æ¥å£æ”¹å›ä½¿ç”¨ `LoginRequest` Pydanticæ¨¡å‹ï¼Œè¿™æ ·FastAPIä¼šè‡ªåŠ¨å¤„ç†ï¼š
- âœ… JSONæ ¼å¼è¯·æ±‚ï¼ˆå‰ç«¯ä½¿ç”¨ï¼‰
- âœ… è¡¨å•æ•°æ®æ ¼å¼è¯·æ±‚ï¼ˆWebSocketæµ‹è¯•ä½¿ç”¨ï¼‰

## ğŸ“ ä¿®æ”¹å†…å®¹

**æ–‡ä»¶**: `backend/app/api/auth.py`

**ä¿®æ”¹å‰**:
```python
@router.post("/login")
async def login(
    username: str = Form(...),
    password: str = Form(...),
    ...
):
```

**ä¿®æ”¹å**:
```python
@router.post("/login")
async def login(
    login_data: LoginRequest,
    ...
):
```

## âœ… ç°åœ¨æ”¯æŒä¸¤ç§æ ¼å¼

### JSONæ ¼å¼ï¼ˆå‰ç«¯ä½¿ç”¨ï¼‰
```javascript
// å‰ç«¯ä»£ç 
await api.post('/auth/login', {
  username: 'admin',
  password: 'admin123'
})
```

### è¡¨å•æ•°æ®æ ¼å¼ï¼ˆWebSocketæµ‹è¯•ä½¿ç”¨ï¼‰
```bash
# curlæµ‹è¯•
curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=admin123"
```

FastAPIä¼šè‡ªåŠ¨è¯†åˆ«Content-Typeå¹¶æ­£ç¡®è§£æã€‚

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•JSONæ ¼å¼
```bash
curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

### æµ‹è¯•è¡¨å•æ ¼å¼
```bash
curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=admin123"
```

ä¸¤ç§æ ¼å¼éƒ½åº”è¯¥æ­£å¸¸å·¥ä½œã€‚

## ğŸ‰ ä¿®å¤å®Œæˆ

ç°åœ¨å‰ç«¯ç™»å½•åŠŸèƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼
