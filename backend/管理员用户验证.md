# ç®¡ç†å‘˜ç”¨æˆ·éªŒè¯ç»“æœ

## âœ… éªŒè¯ç»“æœ

ç®¡ç†å‘˜ç”¨æˆ·**å·²æˆåŠŸåˆå§‹åŒ–**ï¼

### ç”¨æˆ·ä¿¡æ¯

| å­—æ®µ | å€¼ |
|------|-----|
| **ID** | 1 |
| **ç”¨æˆ·å** | admin |
| **é‚®ç®±** | admin@example.com |
| **è§’è‰²ID** | 1 (admin) |
| **è§’è‰²åç§°** | admin |
| **æ˜¯å¦è¶…çº§ç”¨æˆ·** | âœ… æ˜¯ |
| **æ˜¯å¦æ¿€æ´»** | âœ… æ˜¯ |
| **åˆ›å»ºæ—¶é—´** | 2026-01-10 07:17:59 |

### é»˜è®¤ç™»å½•ä¿¡æ¯

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`
- âš ï¸ **é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

---

## ğŸ” éªŒè¯å‘½ä»¤

### æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·

```bash
docker-compose exec postgres psql -U laoqin -d laoqin_panel -c "SELECT id, username, email, role_id, is_superuser FROM users;"
```

### æŸ¥çœ‹ç”¨æˆ·å’Œè§’è‰²å…³è”

```bash
docker-compose exec postgres psql -U laoqin -d laoqin_panel -c "SELECT u.username, u.email, r.name as role_name, u.is_superuser FROM users u LEFT JOIN roles r ON u.role_id = r.id;"
```

### æŸ¥çœ‹æ‰€æœ‰è§’è‰²

```bash
docker-compose exec postgres psql -U laoqin -d laoqin_panel -c "SELECT id, name, description FROM roles;"
```

---

## ğŸ“‹ æ•°æ®åº“çŠ¶æ€

### ç”¨æˆ·è¡¨
- âœ… 1ä¸ªç”¨æˆ·ï¼ˆadminï¼‰

### è§’è‰²è¡¨
- âœ… 2ä¸ªè§’è‰²ï¼ˆadmin, userï¼‰

### æƒé™è¡¨
- âœ… 12ä¸ªæƒé™ï¼ˆserver/device/database çš„ CRUD æƒé™ï¼‰

---

## ğŸš€ æµ‹è¯•ç™»å½•

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
source venv-panle/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. æµ‹è¯•ç™»å½•API

```bash
# ä½¿ç”¨ curl æµ‹è¯•
curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

### 3. æˆ–è®¿é—®å‰ç«¯ç™»å½•é¡µé¢

è®¿é—®å‰ç«¯åº”ç”¨ï¼Œä½¿ç”¨ `admin/admin123` ç™»å½•ã€‚

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é»˜è®¤å¯†ç å®‰å…¨æ€§**: é»˜è®¤å¯†ç  `admin123` ä»…ç”¨äºåˆå§‹è®¾ç½®ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹
2. **å¯†ç ä¿®æ”¹**: é¦–æ¬¡ç™»å½•ååº”ç«‹å³ä¿®æ”¹å¯†ç 
3. **æƒé™éªŒè¯**: ç®¡ç†å‘˜ç”¨æˆ·æ‹¥æœ‰ `is_superuser=True`ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™

---

## ğŸ”§ å¦‚æœéœ€è¦é‡æ–°åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·

### æ–¹æ³•1: åˆ é™¤å¹¶é‡æ–°è¿è¡Œåˆå§‹åŒ–è„šæœ¬

```bash
# åˆ é™¤ç°æœ‰ç”¨æˆ·
docker-compose exec postgres psql -U laoqin -d laoqin_panel -c "DELETE FROM users WHERE username = 'admin';"

# é‡æ–°è¿è¡Œåˆå§‹åŒ–è„šæœ¬
cd backend
source venv-panle/bin/activate
python scripts/init_db.py
```

### æ–¹æ³•2: ç›´æ¥æ’å…¥æ–°ç”¨æˆ·ï¼ˆSQLï¼‰

```sql
-- æ³¨æ„ï¼šéœ€è¦å…ˆè·å–å¯†ç å“ˆå¸Œå€¼
-- å¯ä»¥é€šè¿‡ Python è„šæœ¬ç”Ÿæˆï¼š
-- from passlib.context import CryptContext
-- pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")
-- print(pwd_context.hash("admin123"))

INSERT INTO users (username, email, password_hash, full_name, role_id, is_active, is_superuser)
VALUES (
  'admin',
  'admin@example.com',
  '$2b$12$...',  -- æ›¿æ¢ä¸ºå®é™…çš„å“ˆå¸Œå€¼
  'ç³»ç»Ÿç®¡ç†å‘˜',
  1,
  true,
  true
);
```

---

## âœ… æ€»ç»“

ç®¡ç†å‘˜ç”¨æˆ·å·²æ­£ç¡®åˆå§‹åŒ–ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼

- âœ… ç”¨æˆ·å­˜åœ¨
- âœ… è§’è‰²å…³è”æ­£ç¡®
- âœ… è¶…çº§ç”¨æˆ·æƒé™å·²è®¾ç½®
- âœ… è´¦æˆ·å·²æ¿€æ´»

å¯ä»¥ä½¿ç”¨ `admin/admin123` ç™»å½•ç³»ç»Ÿã€‚

